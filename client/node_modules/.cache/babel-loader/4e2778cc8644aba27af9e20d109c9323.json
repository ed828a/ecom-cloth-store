{"ast":null,"code":"var _jsxFileName = \"E:\\\\LearnWebDev\\\\CompleteReactCourse\\\\ecom-cloth-store\\\\src\\\\pages\\\\shoppage\\\\shop.component.jsx\";\nimport React, { Component } from \"react\";\nimport CollectionsOverview from \"../../component/collections-overview/collections-overview.component\";\nimport { Route } from \"react-router-dom\";\nimport CollectionPage from \"../collectionpage/collection-page.component\";\nimport ErrorPage from \"../errorpage/ErrorPage\"; // import {\n//     firestore,\n//     convertCollectionsSnapshotToMap\n// } from \"../../firebase/firebase.utils\";\n\nimport { connect } from \"react-redux\";\nimport { fetchCollectionsStartAsync } from \"../../redux/shop/shop.actions\";\nimport WithSpinner from \"../../component/with-spinner/with-spinner.component\";\nconst CollectionsOverviewWithSpinner = WithSpinner(CollectionsOverview);\nconst CollectionPageWithSpinner = WithSpinner(CollectionPage);\nexport class ShopPage extends Component {\n  // constructor(props) {\n  //     super(props)\n  //     this.state = {\n  //          loading: true\n  //     }\n  // }\n  // unsubscribeFromSnapshot = null;\n  componentDidMount() {// const { updateCollections } = this.props;\n    // const collectionsRef = firestore.collection(\"collections\");\n    // Observable-Observer parttern\n    // (method) firebase.firestore.Query<firebase.firestore.DocumentData>.onSnapshot(onNext: (snapshot: firebase.firestore.QuerySnapshot<firebase.firestore.DocumentData>) => void, onError?: (error: Error) => void, onCompletion?: () => void): () => void (+3 overloads)\n\n    /*\r\n    this.unsubscribeFromSnapshot = collectionsRef.onSnapshot(\r\n        async snapshot => {\r\n            // console.log('snapshot: ', snapshot);\r\n            const collectionsMap = convertCollectionsSnapshotToMap(\r\n                snapshot\r\n            );\r\n            // console.log('collectionsMap: ', collectionsMap);\r\n            updateCollections(collectionsMap);\r\n            this.setState({ loading: false });\r\n        }\r\n    ); \r\n    */\n    // Promise Pattern\n    // (method) firebase.firestore.Query<firebase.firestore.DocumentData>.get(options?: firebase.firestore.GetOptions): Promise<firebase.firestore.QuerySnapshot<firebase.firestore.DocumentData>>\n    // collectionsRef.get().then(\n    //     async snapshot => {\n    //         // console.log('snapshot: ', snapshot);\n    //         const collectionsMap = convertCollectionsSnapshotToMap(\n    //             snapshot\n    //         );\n    //         // console.log('collectionsMap: ', collectionsMap);\n    //         updateCollections(collectionsMap);\n    //         this.setState({ loading: false });\n    //     }\n    // );  \n    // the only caveat here is that the only time we'll get new data from our back end is when we remount our shop. This is because we're no longer leveraging the live updates stream style that the observable pattern lended us when we are using on snapshot as before.\n    // fetch pattern\n    // fetch('https://firestore.googleapis.com/v1/projects/webdev-c9039/databases/(default)/documents/collections')\n    // .then(response => response.json())\n    // .then(collections => console.log(collections));\n  }\n\n  componentWillUnmount() {// this.unsubscribeFromSnapshot();\n  }\n\n  render() {\n    const {\n      match\n    } = this.props; // const { loading } = this.state;\n\n    return React.createElement(\"div\", {\n      className: \"shop-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: `${match.path}` // component={CollectionsOverview}\n      ,\n      render: props => React.createElement(CollectionsOverviewWithSpinner, Object.assign({\n        isLoading: loading\n      }, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: `${match.path}/:collectionId` // component={CollectionPage}\n      ,\n      render: props => React.createElement(CollectionPageWithSpinner, Object.assign({\n        isLoading: loading\n      }, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: `${match.path}/:collectionId/*`,\n      component: ErrorPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => ({\n  updateCollections: collections => dispatch(updateCollections(collections))\n});\n\nexport default connect(null, mapDispatchToProps)(ShopPage);","map":{"version":3,"sources":["E:/LearnWebDev/CompleteReactCourse/ecom-cloth-store/src/pages/shoppage/shop.component.jsx"],"names":["React","Component","CollectionsOverview","Route","CollectionPage","ErrorPage","connect","fetchCollectionsStartAsync","WithSpinner","CollectionsOverviewWithSpinner","CollectionPageWithSpinner","ShopPage","componentDidMount","componentWillUnmount","render","match","props","path","loading","mapDispatchToProps","dispatch","updateCollections","collections"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,mBAAP,MAAgC,qEAAhC;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,OAAOC,cAAP,MAA2B,6CAA3B;AACA,OAAOC,SAAP,MAAsB,wBAAtB,C,CACA;AACA;AACA;AACA;;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,0BAAT,QAA2C,+BAA3C;AACA,OAAOC,WAAP,MAAwB,qDAAxB;AAEA,MAAMC,8BAA8B,GAAGD,WAAW,CAACN,mBAAD,CAAlD;AACA,MAAMQ,yBAAyB,GAAGF,WAAW,CAACJ,cAAD,CAA7C;AAEA,OAAO,MAAMO,QAAN,SAAuBV,SAAvB,CAAiC;AACpC;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEAW,EAAAA,iBAAiB,GAAG,CAChB;AACA;AAEA;AACA;;AACA;;;;;;;;;;;;;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACH;;AAEDC,EAAAA,oBAAoB,GAAG,CACnB;AACH;;AAEDC,EAAAA,MAAM,GAAG;AACL,UAAM;AAAEC,MAAAA;AAAF,QAAY,KAAKC,KAAvB,CADK,CAEL;;AACA,WACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,KAAD;AACI,MAAA,KAAK,MADT;AAEI,MAAA,IAAI,EAAG,GAAED,KAAK,CAACE,IAAK,EAFxB,CAGI;AAHJ;AAII,MAAA,MAAM,EAAGD,KAAD,IAAW,oBAAC,8BAAD;AAAgC,QAAA,SAAS,EAAEE;AAA3C,SAAwDF,KAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAJvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAQI,oBAAC,KAAD;AACI,MAAA,KAAK,MADT;AAEI,MAAA,IAAI,EAAG,GAAED,KAAK,CAACE,IAAK,gBAFxB,CAGI;AAHJ;AAII,MAAA,MAAM,EAAED,KAAK,IAAI,oBAAC,yBAAD;AAA2B,QAAA,SAAS,EAAEE;AAAtC,SAAmDF,KAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARJ,EAcI,oBAAC,KAAD;AACI,MAAA,IAAI,EAAG,GAAED,KAAK,CAACE,IAAK,kBADxB;AAEI,MAAA,SAAS,EAAEZ,SAFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAdJ,CADJ;AAqBH;;AAhFmC;;AAmFxC,MAAMc,kBAAkB,GAAGC,QAAQ,KAAK;AACpCC,EAAAA,iBAAiB,EAAEC,WAAW,IAAIF,QAAQ,CAACC,iBAAiB,CAACC,WAAD,CAAlB;AADN,CAAL,CAAnC;;AAIA,eAAehB,OAAO,CAAC,IAAD,EAAOa,kBAAP,CAAP,CAAkCR,QAAlC,CAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport CollectionsOverview from \"../../component/collections-overview/collections-overview.component\";\r\nimport { Route } from \"react-router-dom\";\r\nimport CollectionPage from \"../collectionpage/collection-page.component\";\r\nimport ErrorPage from \"../errorpage/ErrorPage\";\r\n// import {\r\n//     firestore,\r\n//     convertCollectionsSnapshotToMap\r\n// } from \"../../firebase/firebase.utils\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchCollectionsStartAsync } from \"../../redux/shop/shop.actions\";\r\nimport WithSpinner from \"../../component/with-spinner/with-spinner.component\";\r\n\r\nconst CollectionsOverviewWithSpinner = WithSpinner(CollectionsOverview);\r\nconst CollectionPageWithSpinner = WithSpinner(CollectionPage);\r\n\r\nexport class ShopPage extends Component {\r\n    // constructor(props) {\r\n    //     super(props)\r\n    \r\n    //     this.state = {\r\n    //          loading: true\r\n    //     }\r\n    // }\r\n    \r\n    // unsubscribeFromSnapshot = null;\r\n\r\n    componentDidMount() {\r\n        // const { updateCollections } = this.props;\r\n        // const collectionsRef = firestore.collection(\"collections\");\r\n\r\n        // Observable-Observer parttern\r\n        // (method) firebase.firestore.Query<firebase.firestore.DocumentData>.onSnapshot(onNext: (snapshot: firebase.firestore.QuerySnapshot<firebase.firestore.DocumentData>) => void, onError?: (error: Error) => void, onCompletion?: () => void): () => void (+3 overloads)\r\n        /*\r\n        this.unsubscribeFromSnapshot = collectionsRef.onSnapshot(\r\n            async snapshot => {\r\n                // console.log('snapshot: ', snapshot);\r\n                const collectionsMap = convertCollectionsSnapshotToMap(\r\n                    snapshot\r\n                );\r\n                // console.log('collectionsMap: ', collectionsMap);\r\n                updateCollections(collectionsMap);\r\n                this.setState({ loading: false });\r\n            }\r\n        ); \r\n        */\r\n\r\n        // Promise Pattern\r\n        // (method) firebase.firestore.Query<firebase.firestore.DocumentData>.get(options?: firebase.firestore.GetOptions): Promise<firebase.firestore.QuerySnapshot<firebase.firestore.DocumentData>>\r\n        // collectionsRef.get().then(\r\n        //     async snapshot => {\r\n        //         // console.log('snapshot: ', snapshot);\r\n        //         const collectionsMap = convertCollectionsSnapshotToMap(\r\n        //             snapshot\r\n        //         );\r\n        //         // console.log('collectionsMap: ', collectionsMap);\r\n        //         updateCollections(collectionsMap);\r\n        //         this.setState({ loading: false });\r\n        //     }\r\n        // );  \r\n        // the only caveat here is that the only time we'll get new data from our back end is when we remount our shop. This is because we're no longer leveraging the live updates stream style that the observable pattern lended us when we are using on snapshot as before.\r\n        \r\n        // fetch pattern\r\n        // fetch('https://firestore.googleapis.com/v1/projects/webdev-c9039/databases/(default)/documents/collections')\r\n        // .then(response => response.json())\r\n        // .then(collections => console.log(collections));\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // this.unsubscribeFromSnapshot();\r\n    }\r\n\r\n    render() {\r\n        const { match } = this.props;\r\n        // const { loading } = this.state;\r\n        return (\r\n            <div className=\"shop-page\">\r\n                <Route\r\n                    exact\r\n                    path={`${match.path}`}\r\n                    // component={CollectionsOverview}\r\n                    render={(props) => <CollectionsOverviewWithSpinner isLoading={loading} {...props} /> }\r\n                    \r\n                />\r\n                <Route\r\n                    exact\r\n                    path={`${match.path}/:collectionId`}\r\n                    // component={CollectionPage}\r\n                    render={props => <CollectionPageWithSpinner isLoading={loading} {...props} />}\r\n                />\r\n                <Route\r\n                    path={`${match.path}/:collectionId/*`}\r\n                    component={ErrorPage}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    updateCollections: collections => dispatch(updateCollections(collections))\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(ShopPage);\r\n"]},"metadata":{},"sourceType":"module"}