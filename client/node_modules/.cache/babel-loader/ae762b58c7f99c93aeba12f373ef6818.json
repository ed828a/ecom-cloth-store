{"ast":null,"code":"import { takeEvery } from 'redux-saga/effects'; // takeEvery: listening to every action of a specific type that we apss to it.\n// import ShopActionTypes from './shop.types';\n\nimport { takeLatest, call, put } from 'redux-saga/effects';\nimport { firestore, convertCollectionsSnapshotToMap } from '../../firebase/firebase.utils';\nimport { fetchCollectionsSuccess, fetchCollectionsFailure } from './shop.actions';\nimport ShopActionTypes from './shop.types'; // first saga code. \n\nexport function* generatorFetchCollectionsAsync() {\n  yield console.log('I am fired.');\n} //What this saga does with the effect is it's going to pause whenever a specific action type that we want comes in.\n\nexport function* fetchCollectionsStart() {\n  // takeEvery takes 2 parameters: first one is the action type, the second one that takes every guess is another generator function that will run in response to this takeEvery listener. in other words, the second one is the action on the action type.\n  yield takeEvery(ShopActionTypes.FETCH_COLLECTIONS_START, generatorFetchCollectionsAsync());\n}\nexport function* fetchCollections() {\n  try {\n    const collectionRef = firestore.collection('collections');\n    const snapshot = yield collectionRef.get();\n    const collectionsMap = yield call(convertCollectionsSnapshotToMap, snapshot);\n    yield put(fetchCollectionsSuccess(collectionsMap));\n  } catch (error) {\n    yield put(fetchCollectionsFailure(error.message));\n  }\n}\nexport function* onFetchCollectionsStart() {\n  //   yield takeLatest(ShopActionTypes.FETCH_COLLECTIONS_START, fetchCollections);\n  yield takeEvery(ShopActionTypes.FETCH_COLLECTIONS_START, generatorFetchCollectionsAsync);\n}","map":{"version":3,"sources":["E:/LearnWebDev/CompleteReactCourse/ecom-cloth-store/src/redux/shop/shop.sagas.js"],"names":["takeEvery","takeLatest","call","put","firestore","convertCollectionsSnapshotToMap","fetchCollectionsSuccess","fetchCollectionsFailure","ShopActionTypes","generatorFetchCollectionsAsync","console","log","fetchCollectionsStart","FETCH_COLLECTIONS_START","fetchCollections","collectionRef","collection","snapshot","get","collectionsMap","error","message","onFetchCollectionsStart"],"mappings":"AAAA,SAASA,SAAT,QAA0B,oBAA1B,C,CAAgD;AAEhD;;AACA,SAASC,UAAT,EAAqBC,IAArB,EAA2BC,GAA3B,QAAsC,oBAAtC;AAEA,SACEC,SADF,EAEEC,+BAFF,QAGO,+BAHP;AAKA,SACEC,uBADF,EAEEC,uBAFF,QAGO,gBAHP;AAKA,OAAOC,eAAP,MAA4B,cAA5B,C,CAEA;;AACA,OAAO,UAAUC,8BAAV,GAA2C;AAC9C,QAAMC,OAAO,CAACC,GAAR,CAAY,aAAZ,CAAN;AACH,C,CAGD;;AACA,OAAO,UAAUC,qBAAV,GAAkC;AACrC;AACA,QAAMZ,SAAS,CACXQ,eAAe,CAACK,uBADL,EAEXJ,8BAA8B,EAFnB,CAAf;AAIH;AAID,OAAO,UAAUK,gBAAV,GAA6B;AAClC,MAAI;AACF,UAAMC,aAAa,GAAGX,SAAS,CAACY,UAAV,CAAqB,aAArB,CAAtB;AACA,UAAMC,QAAQ,GAAG,MAAMF,aAAa,CAACG,GAAd,EAAvB;AACA,UAAMC,cAAc,GAAG,MAAMjB,IAAI,CAC/BG,+BAD+B,EAE/BY,QAF+B,CAAjC;AAIA,UAAMd,GAAG,CAACG,uBAAuB,CAACa,cAAD,CAAxB,CAAT;AACD,GARD,CAQE,OAAOC,KAAP,EAAc;AACd,UAAMjB,GAAG,CAACI,uBAAuB,CAACa,KAAK,CAACC,OAAP,CAAxB,CAAT;AACD;AACF;AAED,OAAO,UAAUC,uBAAV,GAAoC;AAC3C;AAEA,QAAMtB,SAAS,CAACQ,eAAe,CAACK,uBAAjB,EAA0CJ,8BAA1C,CAAf;AACC","sourcesContent":["import { takeEvery } from 'redux-saga/effects'; // takeEvery: listening to every action of a specific type that we apss to it.\r\n\r\n// import ShopActionTypes from './shop.types';\r\nimport { takeLatest, call, put } from 'redux-saga/effects';\r\n\r\nimport {\r\n  firestore,\r\n  convertCollectionsSnapshotToMap\r\n} from '../../firebase/firebase.utils';\r\n\r\nimport {\r\n  fetchCollectionsSuccess,\r\n  fetchCollectionsFailure\r\n} from './shop.actions';\r\n\r\nimport ShopActionTypes from './shop.types';\r\n\r\n// first saga code. \r\nexport function* generatorFetchCollectionsAsync() {\r\n    yield console.log('I am fired.');\r\n}\r\n\r\n\r\n//What this saga does with the effect is it's going to pause whenever a specific action type that we want comes in.\r\nexport function* fetchCollectionsStart() {\r\n    // takeEvery takes 2 parameters: first one is the action type, the second one that takes every guess is another generator function that will run in response to this takeEvery listener. in other words, the second one is the action on the action type.\r\n    yield takeEvery(\r\n        ShopActionTypes.FETCH_COLLECTIONS_START,\r\n        generatorFetchCollectionsAsync()\r\n    );\r\n}\r\n\r\n\r\n\r\nexport function* fetchCollections() {\r\n  try {\r\n    const collectionRef = firestore.collection('collections');\r\n    const snapshot = yield collectionRef.get();\r\n    const collectionsMap = yield call(\r\n      convertCollectionsSnapshotToMap,\r\n      snapshot\r\n    );\r\n    yield put(fetchCollectionsSuccess(collectionsMap));\r\n  } catch (error) {\r\n    yield put(fetchCollectionsFailure(error.message));\r\n  }\r\n}\r\n\r\nexport function* onFetchCollectionsStart() {\r\n//   yield takeLatest(ShopActionTypes.FETCH_COLLECTIONS_START, fetchCollections);\r\n\r\nyield takeEvery(ShopActionTypes.FETCH_COLLECTIONS_START, generatorFetchCollectionsAsync);\r\n}"]},"metadata":{},"sourceType":"module"}