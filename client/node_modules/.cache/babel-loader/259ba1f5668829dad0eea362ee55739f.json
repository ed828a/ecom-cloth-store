{"ast":null,"code":"import { takeEvery, call, put } from 'redux-saga/effects'; // takeEvery: listening to every action of a specific type that we apss to it.\n// call: what call does is that call is the effect code inside of our generate function that invokes the method. the first parameter is the method name, the second parameter is the input arguments of the method\n// put: is saga effect for creating action, like dispatch, we also need yield on it.\n\nimport { firestore, convertCollectionsSnapshotToMap } from \"../../firebase/firebase.utils\";\nimport { fetchCollectionsSuccess, fetchCollectionsFailure } from './shop.actions';\nimport ShopActionTypes from './shop.types'; // first saga code. \n\nexport function* generatorFetchCollectionsAsync() {\n  yield console.log('I am fired.');\n\n  try {\n    const collectionsRef = firestore.collection(\"collections\");\n    const snapshot = yield collectionsRef.get();\n    const collectionsMap = yield call(convertCollectionsSnapshotToMap, snapshot);\n    yield put(fetchCollectionsSuccess(collectionsMap)); // like dispatch(fetchCollectionsSuccess(collectionsMap));\n  } catch (error) {\n    yield put(fetchCollectionsFailure(error.message));\n  }\n\n  collectionsRef.get().then(snapshot => {\n    // console.log('snapshot: ', snapshot);\n    const collectionsMap = convertCollectionsSnapshotToMap(snapshot); // console.log('collectionsMap: ', collectionsMap);\n\n    dispatch(fetchCollectionsSuccess(collectionsMap)); // toggle isFetching again\n  }).catch(error => {\n    dispatch(fetchCollectionsFailure(error.message));\n  });\n} //What this saga does with the effect is it's going to pause whenever a specific action type that we want comes in.\n\nexport function* fetchCollectionsStart() {\n  // takeEvery takes 2 parameters: first one is the action type, the second one that takes every guess is another generator function name that will run in response to this takeEvery listener. in other words, the second one is the action on the action type.\n  yield takeEvery(ShopActionTypes.FETCH_COLLECTIONS_START, generatorFetchCollectionsAsync);\n}","map":{"version":3,"sources":["E:/LearnWebDev/CompleteReactCourse/ecom-cloth-store/src/redux/shop/shop.sagas.js"],"names":["takeEvery","call","put","firestore","convertCollectionsSnapshotToMap","fetchCollectionsSuccess","fetchCollectionsFailure","ShopActionTypes","generatorFetchCollectionsAsync","console","log","collectionsRef","collection","snapshot","get","collectionsMap","error","message","then","dispatch","catch","fetchCollectionsStart","FETCH_COLLECTIONS_START"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,IAApB,EAA0BC,GAA1B,QAAqC,oBAArC,C,CACA;AACA;AACA;;AACA,SACIC,SADJ,EAEIC,+BAFJ,QAGO,+BAHP;AAKA,SACIC,uBADJ,EAEIC,uBAFJ,QAGO,gBAHP;AAKA,OAAOC,eAAP,MAA4B,cAA5B,C,CAEA;;AACA,OAAO,UAAUC,8BAAV,GAA2C;AAC9C,QAAMC,OAAO,CAACC,GAAR,CAAY,aAAZ,CAAN;;AACA,MAAI;AACA,UAAMC,cAAc,GAAGR,SAAS,CAACS,UAAV,CAAqB,aAArB,CAAvB;AACA,UAAMC,QAAQ,GAAG,MAAMF,cAAc,CAACG,GAAf,EAAvB;AACA,UAAMC,cAAc,GAAG,MAAMd,IAAI,CAC7BG,+BAD6B,EAE7BS,QAF6B,CAAjC;AAKA,UAAMX,GAAG,CAACG,uBAAuB,CAACU,cAAD,CAAxB,CAAT,CARA,CASA;AACH,GAVD,CAUE,OAAOC,KAAP,EAAc;AACZ,UAAMd,GAAG,CAACI,uBAAuB,CAACU,KAAK,CAACC,OAAP,CAAxB,CAAT;AACH;;AAGDN,EAAAA,cAAc,CACTG,GADL,GAEKI,IAFL,CAEUL,QAAQ,IAAI;AACd;AACA,UAAME,cAAc,GAAGX,+BAA+B,CAACS,QAAD,CAAtD,CAFc,CAGd;;AACAM,IAAAA,QAAQ,CAACd,uBAAuB,CAACU,cAAD,CAAxB,CAAR,CAJc,CAIqC;AACtD,GAPL,EAQKK,KARL,CAQWJ,KAAK,IAAI;AACZG,IAAAA,QAAQ,CAACb,uBAAuB,CAACU,KAAK,CAACC,OAAP,CAAxB,CAAR;AACH,GAVL;AAWH,C,CAGD;;AACA,OAAO,UAAUI,qBAAV,GAAkC;AACrC;AACA,QAAMrB,SAAS,CACXO,eAAe,CAACe,uBADL,EAEXd,8BAFW,CAAf;AAIH","sourcesContent":["import { takeEvery, call, put } from 'redux-saga/effects';\r\n// takeEvery: listening to every action of a specific type that we apss to it.\r\n// call: what call does is that call is the effect code inside of our generate function that invokes the method. the first parameter is the method name, the second parameter is the input arguments of the method\r\n// put: is saga effect for creating action, like dispatch, we also need yield on it.\r\nimport {\r\n    firestore,\r\n    convertCollectionsSnapshotToMap\r\n} from \"../../firebase/firebase.utils\";\r\n\r\nimport {\r\n    fetchCollectionsSuccess,\r\n    fetchCollectionsFailure\r\n} from './shop.actions'\r\n\r\nimport ShopActionTypes from './shop.types';\r\n\r\n// first saga code. \r\nexport function* generatorFetchCollectionsAsync() {\r\n    yield console.log('I am fired.');\r\n    try {\r\n        const collectionsRef = firestore.collection(\"collections\");\r\n        const snapshot = yield collectionsRef.get();\r\n        const collectionsMap = yield call(\r\n            convertCollectionsSnapshotToMap,\r\n            snapshot\r\n        );\r\n\r\n        yield put(fetchCollectionsSuccess(collectionsMap));\r\n        // like dispatch(fetchCollectionsSuccess(collectionsMap));\r\n    } catch (error) {\r\n        yield put(fetchCollectionsFailure(error.message));\r\n    }\r\n\r\n\r\n    collectionsRef\r\n        .get()\r\n        .then(snapshot => {\r\n            // console.log('snapshot: ', snapshot);\r\n            const collectionsMap = convertCollectionsSnapshotToMap(snapshot);\r\n            // console.log('collectionsMap: ', collectionsMap);\r\n            dispatch(fetchCollectionsSuccess(collectionsMap)); // toggle isFetching again\r\n        })\r\n        .catch(error => {\r\n            dispatch(fetchCollectionsFailure(error.message))\r\n        });\r\n}\r\n\r\n\r\n//What this saga does with the effect is it's going to pause whenever a specific action type that we want comes in.\r\nexport function* fetchCollectionsStart() {\r\n    // takeEvery takes 2 parameters: first one is the action type, the second one that takes every guess is another generator function name that will run in response to this takeEvery listener. in other words, the second one is the action on the action type.\r\n    yield takeEvery(\r\n        ShopActionTypes.FETCH_COLLECTIONS_START,\r\n        generatorFetchCollectionsAsync\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}